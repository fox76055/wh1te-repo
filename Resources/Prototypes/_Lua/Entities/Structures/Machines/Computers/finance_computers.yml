# LuaWorld - This file is licensed under AGPLv3
# Copyright (c) 2025 LuaWorld Contributors
# See AGPLv3.txt for details.

##
# Finance consoles set
# - Deposits Overview (Service/Command variants): read-only crew deposits, access-gated
# - Personal Deposit Terminal: player-managed deposits via ID insertion
# - Credit Rating Console: lookup by name/ID, shows score and limits
# - Loan Issuance Console: privileged issuance, requires Command access + ID
# - Public Loan Board: read-only station loans
##

- type: entity
  parent: BaseComputerAiAccess
  id: NFFinanceDepositsViewComputerService
  name: "Deposits Overview Console (Service)" #Lua: добавлен заголовок лицензии
  description: "Service terminal for reviewing crew deposit overviews. Service access required."
  components:
  - type: Computer
    board: IDComputerCircuitboard
  - type: Sprite
    sprite: Structures/Machines/computers.rsi
    layers:
    - map: ["computerLayerBody"]
      state: computer
    - map: ["computerLayerKeyboard"]
      state: generic_keyboard
    - map: ["computerLayerScreen"]
      state: eris_control
    - map: ["computerLayerKeys"]
      state: generic_keys
  - type: ActivatableUI
    key: enum.NFFinanceLoansUiKey.Key
    singleUser: true
  - type: ActivatableUIRequiresAccess
  - type: AccessReader
    access: [[ "Service" ]]
  - type: FinanceLoansConsole
  - type: UserInterface
    interfaces:
      enum.NFFinanceLoansUiKey.Key:
        type: NFFinanceLoansBoundUserInterface
  - type: Tag
    tags: [ NFFinanceLoansConsole ]

- type: entity
  parent: BaseComputer
  id: NFFinanceDepositComputerPublic
  name: "Personal Deposit Terminal" #Lua
  description: "Manage your own deposits: open, top up, withdraw interest. Public access; keeps your savings compounding while you work."
  components:
  - type: Computer
    board: IDComputerCircuitboard
  - type: Sprite
    sprite: Structures/Machines/computers.rsi
    layers:
    - map: ["computerLayerBody"]
      state: computer
    - map: ["computerLayerKeyboard"]
      state: generic_keyboard
    - map: ["computerLayerScreen"]
      state: eris_control
    - map: ["computerLayerKeys"]
      state: generic_keys
  - type: ActivatableUI
    key: enum.NFFinanceDepositUiKey.Key
    singleUser: false
  - type: ItemSlots
  - type: ContainerContainer
    containers:
      board: !type:Container
      FinanceDepositConsole-targetId: !type:ContainerSlot {}
  - type: FinanceDepositConsole
    targetIdSlot:
      name: finance-deposit-console-target-id #Lua: локализуем через FTL
      ejectSound: /Audio/Machines/id_swipe.ogg
      insertSound: /Audio/Weapons/Guns/MagIn/batrifle_magin.ogg
      ejectOnBreak: true
      swap: true
      whitelist:
        components:
        - IdCard
  - type: UserInterface
    interfaces:
      enum.NFFinanceDepositUiKey.Key:
        type: NFFinanceDepositBoundUserInterface
  - type: Tag
    tags: [ NFFinanceDepositConsole ]

- type: entity
  parent: BaseComputerAiAccess
  id: NFFinanceRatingComputer
  name: "Credit Rating Console" #Lua
  description: "Lookup terminal for credit scores by name or ID. Shows max loan, active loans, and next charge."
  components:
  - type: Computer
    board: IDComputerCircuitboard
  - type: Sprite
    sprite: Structures/Machines/computers.rsi
    layers:
    - map: ["computerLayerBody"]
      state: computer
    - map: ["computerLayerKeyboard"]
      state: generic_keyboard
    - map: ["computerLayerScreen"]
      state: eris_control
    - map: ["computerLayerKeys"]
      state: generic_keys
  - type: ActivatableUI
    key: enum.NFFinanceRatingUiKey.Key
    singleUser: true
  - type: ItemSlots
  - type: ContainerContainer
    containers:
      board: !type:Container
      FinanceRatingConsole-targetId: !type:ContainerSlot {}
  - type: FinanceRatingConsole
    targetIdSlot:
      name: finance-rating-console-target-id #Lua: локализуем через FTL
      ejectSound: /Audio/Machines/id_swipe.ogg
      insertSound: /Audio/Weapons/Guns/MagIn/batrifle_magin.ogg
      ejectOnBreak: true
      swap: true
      whitelist:
        components:
        - IdCard
  - type: UserInterface
    interfaces:
      enum.NFFinanceRatingUiKey.Key:
        type: NFFinanceRatingBoundUserInterface
  - type: Tag
    tags: [ NFFinanceRatingConsole ]

- type: entity
  parent: BaseComputerAiAccess
  id: NFFinanceIssuanceComputer
  name: "Loan Issuance Console" #Lua
  description: "Secure terminal for issuing new loans. Requires Command authorization and a privileged ID card."
  components:
  - type: Computer
    board: IDComputerCircuitboard
  - type: Sprite
    sprite: Structures/Machines/computers.rsi
    layers:
    - map: ["computerLayerBody"]
      state: computer
    - map: ["computerLayerKeyboard"]
      state: generic_keyboard
    - map: ["computerLayerScreen"]
      state: eris_control
    - map: ["computerLayerKeys"]
      state: generic_keys
  - type: AccessReader
    access: [[ "Command" ]]
  - type: ActivatableUI
    key: enum.NFFinanceIssuanceUiKey.Key
    singleUser: true
  - type: ItemSlots
  - type: ContainerContainer
    containers:
      board: !type:Container
      FinanceIssuanceConsole-privilegedId: !type:ContainerSlot {}
  - type: FinanceIssuanceConsole
    privilegedIdSlot:
      name: finance-issuance-console-privileged-id #Lua: локализуем через FTL
      ejectSound: /Audio/Machines/id_swipe.ogg
      insertSound: /Audio/Weapons/Guns/MagIn/batrifle_magin.ogg
      ejectOnBreak: true
      swap: true
      whitelist:
        components:
        - IdCard
  - type: UserInterface
    interfaces:
      enum.NFFinanceIssuanceUiKey.Key:
        type: NFFinanceIssuanceBoundUserInterface
  - type: Tag
    tags: [ NFFinanceIssuanceConsole ]

- type: entity
  parent: BaseComputer
  id: NFFinanceLoansComputer
  name: "Public Loan Board" #Lua
  description: "Read-only board listing all currently issued loans on the station."
  components:
  - type: Computer
    board: IDComputerCircuitboard
  - type: Sprite
    sprite: Structures/Machines/computers.rsi
    layers:
    - map: ["computerLayerBody"]
      state: computer
    - map: ["computerLayerKeyboard"]
      state: generic_keyboard
    - map: ["computerLayerScreen"]
      state: eris_control
    - map: ["computerLayerKeys"]
      state: generic_keys
  - type: ActivatableUI
    key: enum.NFFinanceLoansUiKey.Key
    singleUser: true
  - type: FinanceLoansConsole
  - type: UserInterface
    interfaces:
      enum.NFFinanceLoansUiKey.Key:
        type: NFFinanceLoansBoundUserInterface
  - type: Tag
    tags: [ NFFinanceLoansConsole ]

- type: entity
  parent: BaseComputerAiAccess
  id: NFFinanceDepositsViewComputer
  name: "Deposits Overview Console" #Lua
  description: "Command terminal providing an overview of all active deposits across the crew."
  components:
  - type: Computer
    board: IDComputerCircuitboard
  - type: Sprite
    sprite: Structures/Machines/computers.rsi
    layers:
    - map: ["computerLayerBody"]
      state: computer
    - map: ["computerLayerKeyboard"]
      state: generic_keyboard
    - map: ["computerLayerScreen"]
      state: eris_control
    - map: ["computerLayerKeys"]
      state: generic_keys
  - type: AccessReader
    access: [[ "Command" ]]
  - type: ActivatableUI
    key: enum.NFFinanceLoansUiKey.Key
    singleUser: true
  - type: FinanceLoansConsole
  - type: UserInterface
    interfaces:
      enum.NFFinanceLoansUiKey.Key:
        type: NFFinanceLoansBoundUserInterface
  - type: Tag
    tags: [ NFFinanceLoansConsole ]


